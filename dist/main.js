var Client=function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return u}));var o=[];console.log("Port is:",t.env.PORT);const r=t.env.PORT||5e3;function a(t){t.addEventListener("click",(function(t){(function(){if(""===document.getElementById("postCity").value)return alert("Please enter a city"),!1;return!0})()&&async function(){await(async()=>{const t=`http://localhost:${r}/geo`,e=document.getElementById("postCity").value,n=document.getElementById("postCountry").value;console.log(t);const o=await fetch(t,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({city:e,country:n})});try{const t=(await o.json()).geonames[0];if(t)return t;throw new Error("City not found")}catch(t){alert("City not found"),console.log("postCity function error",t)}})().then(t=>{const e=t.name,n=t.countryName,o=t.lat,a=t.lng,i=function(){const t=document.getElementById("postStartDate").value,e=document.getElementById("postEndDate").value,n=new Date(t).getTime()-(new Date).getTime(),o=new Date(e).getTime()-new Date(t).getTime(),r=n/864e5+1,a=o/864e5;return{startDate:t,endDate:e,daysToStartDate:Math.trunc(r),daysToEndDate:Math.trunc(r)+a,length:a+1}}(),c=(async(t,e,n,o,a)=>{const i=`http://localhost:${r}/weather`;if(a.daysToEndDate>16||a.daysToEndDate<0)var c=!0;else c=!1;const s=await fetch(i,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({city:t,country:e,lat:n,lon:o,future:c,daysToStartDate:a.daysToStartDate,startDate:a.startDate,endDate:a.endDate,length:a.length})});try{return await s.json()}catch(t){console.log("postWeather function error",t)}})(e,n,o,a,i),s=(async(t,e)=>{const n=`http://localhost:${r}/pixabay`,o=await fetch(n,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({city:t,country:e})});try{return(await o.json()).webformatURL}catch(t){console.log("postPicture function error",t)}})(e,n);return Promise.all([c,e,n,i,s]).then(t=>t)}).then(t=>{!function(t){let e={city:t[1],country:t[2],startDate:t[3].startDate,daysToStartDate:t[3].daysToStartDate,daysToEndDate:t[3].daysToEndDate,weather:t[0],picture:t[4],length:t[3].length};o.push(e),i(o)}(t)}).then(()=>{document.getElementById("postCity").value="",document.getElementById("postCountry").value="",document.getElementById("postStartDate").value="",document.getElementById("postEndDate").value="",s()})}()}))}function i(t){localStorage.setItem("db",JSON.stringify(t))}function c(){return JSON.parse(localStorage.getItem("db"))}const s=async()=>{o=null===c()?[]:c(),l(),function(){const t=document.getElementById("entryHolder"),e=c();if(e){e.sort((t,e)=>t.daysToStartDate>e.daysToStartDate?1:-1),t.innerHTML="";for(let o in e){const r=e[o];if(void 0===r.country)var n=r.city;else n=`${r.city}, ${r.country}`;let a="";if(r.daysToEndDate>=0&&r.daysToEndDate<=16){a+='\n                <h4 style="margin-bottom: 0px">\n                    Weather breakdown\n                </h4>\n            ';for(let t in r.weather){let e=r.weather[t];a+=`\n                    <div class="description-day">\n                        Day ${parseInt(t)+1}: High: ${e.max_temp} Low: ${e.min_temp} <br>\n                        ${e.weather.description}\n                    </div>\n\n                `}}else{let t=r.weather[0];a=`\n                <h4 style="margin-bottom: 0px">\n                    Current weather\n                </h4>\n                <div class="description-day">\n                    High: ${t.max_temp} Low: ${t.min_temp} <br>\n                    ${t.weather.description}\n                </div>\n\n                `}t.innerHTML+=`\n            <div class='holiday' id='${o}'>\n                <div class='holiday-picture'><img src=${r.picture}></div>\n                <div class='description'>\n                \n                    <h4 class='holiday-destination' style="margin-bottom: 0px">${n}</h4>\n                    <div>\n                        Departure in ${r.daysToStartDate} days on ${r.startDate}<br>\n                        Length of trip: ${r.length} days\n                    </div>\n                    \n                    ${a}\n\n                </div>\n                <div class="delete">\n                    <button type="submit"> <span>Remove trip</span></button>\n                </div>\n            </div>\n        `}}}(),function(){const t=document.getElementsByClassName("delete");for(let e of t)e.addEventListener("click",t=>{if("SPAN"===t.path[0].tagName)var e=t.path[3];else e=t.path[2];let n=e.id,r=e.children[1].textContent.trim().split("\n")[0];confirm(`Are you sure you want to delete your holiday to ${r}?`)&&((o=c()).sort((t,e)=>t.daysToStartDate>e.daysToStartDate?1:-1),o.splice(n,1),i(o),s())})}(),function(){let t=document.getElementById("HolidaysTitle");0===o.length?t.innerText="":t.innerText||(t.innerText="Holidays coming up")}()};function d(t){return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}function l(t=null){if(t)n=new Date(t.value);else{var e=new Date,n=new Date;document.getElementById("postStartDate").value=d(e)}n.setDate(n.getDate()+1),document.getElementById("postEndDate").value=d(n)}function u(t){t.addEventListener("input",()=>{l(t)})}}).call(this,n(2))},function(t,e,n){"use strict";n.r(e);var o=n(0);n.d(e,"updateUI",(function(){return o.c})),n.d(e,"clickBtn",(function(){return o.a})),n.d(e,"detectDate",(function(){return o.b}));n(3);document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("generate"),e=(document.getElementById("feelings"),document.getElementById("postStartDate"));Object(o.c)(),Object(o.a)(t),Object(o.b)(e)})},function(t,e){var n,o,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{o="function"==typeof clearTimeout?clearTimeout:i}catch(t){o=i}}();var s,d=[],l=!1,u=-1;function p(){l&&s&&(l=!1,s.length?d=s.concat(d):u=-1,d.length&&f())}function f(){if(!l){var t=c(p);l=!0;for(var e=d.length;e;){for(s=d,d=[];++u<e;)s&&s[u].run();u=-1,e=d.length}s=null,l=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===i||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new m(t,e)),1!==d.length||l||c(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){var o=n(4),r=n(5);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var a={insert:"head",singleton:!1};o(r,a);t.exports=r.locals||{}},function(t,e,n){"use strict";var o,r=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},a=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),i=[];function c(t){for(var e=-1,n=0;n<i.length;n++)if(i[n].identifier===t){e=n;break}return e}function s(t,e){for(var n={},o=[],r=0;r<t.length;r++){var a=t[r],s=e.base?a[0]+e.base:a[0],d=n[s]||0,l="".concat(s," ").concat(d);n[s]=d+1;var u=c(l),p={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(i[u].references++,i[u].updater(p)):i.push({identifier:l,updater:h(p,e),references:1}),o.push(l)}return o}function d(t){var e=document.createElement("style"),o=t.attributes||{};if(void 0===o.nonce){var r=n.nc;r&&(o.nonce=r)}if(Object.keys(o).forEach((function(t){e.setAttribute(t,o[t])})),"function"==typeof t.insert)t.insert(e);else{var i=a(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var l,u=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function p(t,e,n,o){var r=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(t.styleSheet)t.styleSheet.cssText=u(e,r);else{var a=document.createTextNode(r),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(a,i[e]):t.appendChild(a)}}function f(t,e,n){var o=n.css,r=n.media,a=n.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),a&&btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var m=null,g=0;function h(t,e){var n,o,r;if(e.singleton){var a=g++;n=m||(m=d(e)),o=p.bind(null,n,a,!1),r=p.bind(null,n,a,!0)}else n=d(e),o=f.bind(null,n,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var n=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var o=0;o<n.length;o++){var r=c(n[o]);i[r].references--}for(var a=s(t,e),d=0;d<n.length;d++){var l=c(n[d]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}n=a}}}},function(t,e,n){(e=n(6)(!1)).push([t.i,".inputs{width:70%;max-width:700px;margin:auto}.holder{display:grid;text-align:center}.entry{background:rgba(94,113,155,0.4);border-radius:15px;margin-top:15px;margin-bottom:15px}#entryHolder{margin-top:10px}.holiday{background:rgba(59,140,227,0.4);padding-top:25px;margin-bottom:25px}.holiday-picture img{display:block;margin-left:auto;margin-right:auto;width:90%}.description-day{padding-bottom:10px}label{display:block;font-size:24px;margin:auto;text-align:left;padding-top:15px}input{display:block;height:50px;width:66%;background:#22b2da;color:#041f3c;font-size:15px;font-family:'Oswald', sans-serif;border:none;margin:auto;padding-left:2%;padding-right:2%}::placeholder{color:#4a627b;font-family:'Oswald', sans-serif}:-ms-input-placeholder{color:#4a627b;font-family:'Oswald', sans-serif}::-ms-input-placeholder{color:#4a627b;font-family:'Oswald', sans-serif}@media (min-width: 700px){.inputs{display:grid;grid-template-columns:1fr 1fr;width:80%;margin:auto}}footer{display:fill;justify-content:space-between;padding:15px 40px;background-color:#3279b0}.footer_notes{text-align:center}#app{background:#88cbab;background:linear-gradient(180deg, #fff 0%, #caf7f4 100%);color:#030b0b;justify-content:center;font-size:1.4em;font-family:'Oswald', sans-serif;padding:15px;min-height:100vh}.wrapper{max-width:800px;margin:auto}body{margin:0;font-size:16px}h1{font-size:36px}p{width:70%;margin:auto;padding-bottom:20px;text-align:justify}.inputs{width:70%;max-width:700px;margin:auto}.holder{display:grid;text-align:center}.entry{background:rgba(94,113,155,0.4);border-radius:15px;margin-top:15px;margin-bottom:15px}#entryHolder{margin-top:10px}.holiday{background:rgba(59,140,227,0.4);padding-top:25px;margin-bottom:25px}.holiday-picture img{display:block;margin-left:auto;margin-right:auto;width:90%}.description-day{padding-bottom:10px}label{display:block;font-size:24px;margin:auto;text-align:left;padding-top:15px}input{display:block;height:50px;width:66%;background:#22b2da;color:#041f3c;font-size:15px;font-family:'Oswald', sans-serif;border:none;margin:auto;padding-left:2%;padding-right:2%}::placeholder{color:#4a627b;font-family:'Oswald', sans-serif}:-ms-input-placeholder{color:#4a627b;font-family:'Oswald', sans-serif}::-ms-input-placeholder{color:#4a627b;font-family:'Oswald', sans-serif}@media (min-width: 700px){.inputs{display:grid;grid-template-columns:1fr 1fr;width:80%;margin:auto}}.delete{padding:15px}.button{margin:auto;display:grid;text-align:center;padding-top:20px;padding-bottom:20px}button{width:70%;max-width:350px;height:50px;background:#3b4a6b;color:#83d8ac;font-size:26px;font-family:'Oswald', sans-serif;border:none;box-shadow:2px 4px 5px #444;transition:0.4s;cursor:pointer;margin:auto}button span{display:inline-block;position:relative;transition:0.5s}button span:after{content:'\\00bb';position:absolute;opacity:0;top:0;right:-20px;transition:0.5s}button:hover span{padding-right:20px}button:hover span:after{opacity:1;right:0}.headline{color:#266559;font-size:3em;padding-top:25px;padding-bottom:25px}.title{color:#90a0c2;font-weight:bold;font-size:1.5em;padding-top:15px}.box{border:3px solid red}input:focus,select:focus,textarea:focus,button:focus{outline:none}\n",""]),t.exports=e},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var r=(i=o,c=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(s," */")),a=o.sources.map((function(t){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(t," */")}));return[n].concat(a).concat([r]).join("\n")}var i,c,s;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,o){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(o)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(r[i]=!0)}for(var c=0;c<t.length;c++){var s=[].concat(t[c]);o&&r[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),e.push(s))}},e}}]);